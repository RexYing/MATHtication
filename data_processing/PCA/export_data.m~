%% Export data for current jaw
% 
% raw
% sampling
% cropped
%
docNode = com.mathworks.xml.XMLUtils.createDocument('mathtication');
docRootNode = docNode.getDocumentElement;
docRootNode.setAttribute('upper_jaw_name', 'upper_cropped-downsampled.ply');
docRootNode.setAttribute('lower_jaw_name', 'lower_cropped-downsampled.ply');

axesElem = docNode.createElement('axes');
docRootNode.appendChild(axesElem);

%% axes raw
axesRawElem = docNode.createElement('axes_raw');
axesElem.appendChild(axesRawElem);
axesLower = docNode.createElement('lower');
axesUpper = docNode.createElement('upper');
axesRawElem.appendChild(axesLower);
axesRawElem.appendChild(axesUpper);
for i = 1: 3
    % Lower Raw
    axis = docNode.createElement(strcat('axis', int2str(i)));
    axis.appendChild(docNode.createTextNode(sprintf('%f,%f,%f', ...
        axes_lower_raw(:, i)) ));
    axesLower.appendChild(axis);
    
    % Upper Raw
    axis = docNode.createElement(strcat('axis', int2str(i)));
    axis.appendChild(docNode.createTextNode(sprintf('%f,%f,%f', ...
        axes_upper_raw(:, i)) ));
    axesUpper.appendChild(axis);
end

%% axes sample 
axesSampleElem = docNode.createElement('axes_FM');
axesElem.appendChild(axesSampleElem);
axesLower = docNode.createElement('lower');
axesUpper = docNode.createElement('upper');
axesSampleElem.appendChild(axesLower);
axesSampleElem.appendChild(axesUpper);
for i = 1: 3
    % Lower Raw
    axis = docNode.createElement(strcat('axis', int2str(i)));
    axis.appendChild(docNode.createTextNode(sprintf('%f,%f,%f', ...
        axes_lower_raw(:, i)) ));
    axesLower.appendChild(axis);
    
    % Upper Raw
    axis = docNode.createElement(strcat('axis', int2str(i)));
    axis.appendChild(docNode.createTextNode(sprintf('%f,%f,%f', ...
        axes_upper_raw(:, i)) ));
    axesUpper.appendChild(axis);
end

%% Output
xmlFileName = ['data/jaw1', '.xml'];
xmlwrite(xmlFileName, docNode);
type(xmlFileName);